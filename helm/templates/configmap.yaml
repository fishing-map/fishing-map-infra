{{- if .Values.configmap.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: fishing-map-config
  namespace: {{ .Values.namespace }}
  labels:
    app: fishing-map
    {{- include "fishing-map-infrastructure.labels" . | nindent 4 }}
data:
  NODE_ENV: "production"
  PORT: "3000"

  # Domain Configuration
  API_URL: "https://api.fishingmap.com.br"
  FRONTEND_URL: "https://fishingmap.com.br"
  APP_URL: "https://app.fishingmap.com.br"

  # Redis
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"

  # CORS
  CORS_ORIGINS: "https://fishingmap.com.br,https://www.fishingmap.com.br,https://app.fishingmap.com.br"

  # Upload
  UPLOAD_MAX_SIZE: "10485760"
  UPLOAD_ALLOWED_TYPES: "image/jpeg,image/png,image/webp,image/heic"

  # Rate limit
  API_RATE_LIMIT: "100"
  API_RATE_WINDOW: "60000"

  # Cookie
  COOKIE_DOMAIN: ".fishingmap.com.br"
  COOKIE_SECURE: "true"
  COOKIE_SAME_SITE: "strict"

  # Observability / Tracing
  PROMETHEUS_ENABLED: "true"
  OTEL_ENABLED: "true"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://jaeger-service:4318"
  OTEL_SERVICE_NAME: "fishing-map-backend"
  OTEL_SERVICE_VERSION: "1.0.0"

  # Loki
  LOKI_HOST: "loki-service"
  LOKI_PORT: "3100"
{{- end }}

