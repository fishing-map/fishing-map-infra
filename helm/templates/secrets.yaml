{{- if .Values.secrets.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: fishing-map-secrets
  namespace: {{ .Values.namespace }}
  labels:
    app: fishing-map
    {{- include "fishing-map-infrastructure.labels" . | nindent 4 }}
type: Opaque
stringData:
  # Database Configuration
  DB_HOST: "{{ .Values.secrets.database.host }}"
  DB_PORT: "{{ .Values.secrets.database.port }}"
  DB_NAME: "{{ .Values.secrets.database.name }}"
  DB_USER: "{{ .Values.secrets.database.user }}"
  DB_PASSWORD: "{{ .Values.secrets.database.password }}"
  DB_PASS: "{{ .Values.secrets.database.password }}"
  DB_SCHEMA: "{{ .Values.secrets.database.schema }}"
  DB_SSL: "{{ .Values.secrets.database.ssl }}"

  # Redis Configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_PASSWORD: "{{ .Values.secrets.redis.password }}"
  REDIS_DB: "0"

  # JWT Authentication
  JWT_SECRET: "{{ .Values.secrets.jwt.secret }}"
  JWT_EXPIRES_IN: "{{ .Values.secrets.jwt.expiresIn }}"
  JWT_ISSUER: "fishing-map-api"
  JWT_AUDIENCE: "fishing-map-app"

  # Refresh Token
  REFRESH_TOKEN_SECRET: "{{ .Values.secrets.jwt.refreshSecret }}"
  REFRESH_TOKEN_EXPIRES_IN: "7d"
  JWT_REFRESH_EXPIRES_IN: "2592000"

  # External APIs
  API_KEY_WEATHER: "{{ .Values.secrets.weather.apiKey }}"
  OPENWEATHER_API_KEY: "{{ .Values.secrets.weather.apiKey }}"

  # DigitalOcean Spaces
  SPACES_ACCESS_KEY: "{{ .Values.secrets.spaces.accessKey }}"
  SPACES_SECRET_KEY: "{{ .Values.secrets.spaces.secretKey }}"
  SPACES_ENDPOINT: "{{ .Values.secrets.spaces.endpoint }}"
  SPACES_BUCKET: "{{ .Values.secrets.spaces.bucket }}"
  SPACES_REGION: "{{ .Values.secrets.spaces.region }}"
  SPACES_CDN_URL: "{{ .Values.secrets.spaces.cdnUrl }}"
{{- end }}

